<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Insomnia Severity Index (ISI)</title>

<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    background: #f2f5f7;
}

/* ---------- FORM SCREEN ---------- */
.container {
    max-width: 600px;
    margin: auto;
    padding: 15px;
}

.logo {
    text-align: center;
    margin-bottom: 10px;
}

.logo img {
    max-width: 180px;
    height: auto;
}

h2 {
    text-align: center;
    color: #2c3e50;
    margin-bottom: 5px;
}

p {
    text-align: center;
    font-size: 14px;
    color: #555;
    margin-bottom: 15px;
}

.question {
    background: #ffffff;
    padding: 15px;
    margin-bottom: 12px;
    border-radius: 8px;
    box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}

label {
    display: block;
    padding: 8px;
    border-radius: 6px;
    margin-bottom: 6px;
    background: #f7f9fa;
}

button {
    width: 100%;
    padding: 14px;
    font-size: 18px;
    background: #007bff;
    color: #ffffff;
    border: none;
    border-radius: 8px;
    cursor: pointer;
}

/* ---------- RESULT SCREEN ---------- */
.result-screen {
    display: none;
    height: 100vh;
    background: #1abc9c;
    color: #ffffff;
    padding: 20px 15px;
    text-align: center;
    box-sizing: border-box;
}

.result-title {
    font-size: 22px;
    margin-bottom: 10px;
}

.score {
    font-size: 48px;
    font-weight: bold;
    margin: 10px 0;
}

.interpretation {
    font-size: 22px;
    margin-bottom: 15px;
}

.advice {
    font-size: 15px;
    line-height: 1.4;
}

.reset-btn {
    margin-top: 20px;
    background: #ffffff;
    color: #1abc9c;
    font-size: 16px;
}
</style>
</head>

<body>

<!-- FORM SCREEN -->
<div class="container" id="formScreen">


<h2>Insomnia Severity Index (ISI)</h2>
<p>During the last 2 weeks, how severe were your sleep problems?</p>

<form id="isiForm">

<script>
const questions = [
"Difficulty falling asleep",
"Difficulty staying asleep",
"Problem waking up too early",
"Satisfaction with your current sleep pattern",
"Interference of sleep problem with daily functioning",
"Noticeability of sleep problem to others",
"Distress caused by sleep problem"
];

const options = [
"No problem (0)",
"Mild (1)",
"Moderate (2)",
"Severe (3)",
"Very severe (4)"
];

questions.forEach((q, i) => {
    document.write(`<div class="question"><strong>${i+1}. ${q}</strong><br>`);
    options.forEach((opt, val) => {
        document.write(`
        <label>
            <input type="radio" name="q${i}" value="${val}" required>
            ${opt}
        </label>
        `);
    });
    document.write(`</div>`);
});
</script>

<button type="button" onclick="calculateScore()">Submit</button>
</form>
</div>

<!-- RESULT SCREEN -->
<div class="result-screen" id="resultScreen">
    <div class="result-title">Your ISI Score</div>
    <div class="score" id="scoreText"></div>
    <div class="interpretation" id="interpretationText"></div>
    <div class="advice">
        This questionnaire is a screening tool and does not replace medical diagnosis.<br>
        <strong>Please consult your doctor for further evaluation and treatment.</strong>
    </div>
    <button class="reset-btn" onclick="resetSurvey()">Take Survey Again</button>
</div>

<script>
function calculateScore() {
    let total = 0;

    for (let i = 0; i < 7; i++) {
        const selected = document.querySelector(`input[name="q${i}"]:checked`);
        if (!selected) {
            alert("Please answer all questions.");
            return;
        }
        total += parseInt(selected.value);
    }

    let interpretation = "";
    if (total <= 7) interpretation = "No Clinically Significant Insomnia";
    else if (total <= 14) interpretation = "Subthreshold Insomnia";
    else if (total <= 21) interpretation = "Moderate Insomnia";
    else interpretation = "Severe Insomnia";

    document.getElementById("formScreen").style.display = "none";
    document.getElementById("resultScreen").style.display = "block";
    document.getElementById("scoreText").innerText = total + " / 28";
    document.getElementById("interpretationText").innerText = interpretation;
}

function resetSurvey() {
    location.reload();
}
</script>

</body>
</html>

